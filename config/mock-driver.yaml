# Mock Driver Configuration for Pallet Shuttle Robot
# Purpose: Simulates fieldbus communication for testing without actual hardware
# Used by: Feature 016 - Pallet Shuttle Control System

# Fieldbus protocol settings
protocol: "Mock"
cycle_time_us: 1000  # 1ms cycle time (1000 Hz update rate)
enable_diagnostics: true

# Device configuration
device_count: 64  # Number of simulated I/O devices

# Simulation parameters for pallet shuttle
simulation:
  # Position sensors (simulated encoders)
  position_sensors:
    - name: "shuttle_x_position"
      device_id: 0
      type: "analog"
      range: [0.0, 10000.0]  # mm
      noise_level: 0.1  # Â±0.1mm noise

    - name: "shuttle_y_position"
      device_id: 1
      type: "analog"
      range: [0.0, 5000.0]  # mm
      noise_level: 0.1

    - name: "lift_height"
      device_id: 2
      type: "analog"
      range: [0.0, 2000.0]  # mm
      noise_level: 0.5

  # Digital inputs (safety sensors, limit switches)
  digital_inputs:
    - name: "emergency_stop"
      device_id: 10
      type: "digital"
      default_state: false

    - name: "pallet_detected"
      device_id: 11
      type: "digital"
      default_state: false

    - name: "position_limit_x_min"
      device_id: 12
      type: "digital"
      default_state: false

    - name: "position_limit_x_max"
      device_id: 13
      type: "digital"
      default_state: false

    - name: "position_limit_y_min"
      device_id: 14
      type: "digital"
      default_state: false

    - name: "position_limit_y_max"
      device_id: 15
      type: "digital"
      default_state: false

    - name: "lift_limit_top"
      device_id: 16
      type: "digital"
      default_state: false

    - name: "lift_limit_bottom"
      device_id: 17
      type: "digital"
      default_state: true  # At bottom by default

  # Motor commands (velocity/position commands)
  motor_commands:
    - name: "x_axis_velocity"
      device_id: 20
      type: "analog"
      range: [-1000.0, 1000.0]  # mm/s

    - name: "y_axis_velocity"
      device_id: 21
      type: "analog"
      range: [-1000.0, 1000.0]  # mm/s

    - name: "lift_velocity"
      device_id: 22
      type: "analog"
      range: [-500.0, 500.0]  # mm/s

  # Digital outputs (actuators, indicators)
  digital_outputs:
    - name: "brake_x_axis"
      device_id: 30
      type: "digital"
      default_state: true  # Brakes engaged by default

    - name: "brake_y_axis"
      device_id: 31
      type: "digital"
      default_state: true

    - name: "brake_lift"
      device_id: 32
      type: "digital"
      default_state: true

    - name: "status_led_green"
      device_id: 33
      type: "digital"
      default_state: false

    - name: "status_led_yellow"
      device_id: 34
      type: "digital"
      default_state: false

    - name: "status_led_red"
      device_id: 35
      type: "digital"
      default_state: false

# Error injection (for testing alarm system)
error_injection:
  enabled: false  # Set to true to enable simulated errors
  scenarios:
    - name: "position_sensor_fault"
      probability: 0.001  # 0.1% chance per cycle
      duration_cycles: 100

    - name: "motor_overcurrent"
      probability: 0.0005
      duration_cycles: 50

    - name: "communication_timeout"
      probability: 0.0001
      duration_cycles: 10
